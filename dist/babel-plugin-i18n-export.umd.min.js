!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e["babel-plugin-i18n-export"]=n()}(this,function(){"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}var n=require("fs");require("fs");var t="i18n",o=[];return function(r){return r.types,{visitor:{CallExpression:{enter:function(e,n){var t=n.opts.functionName||t;if("CallExpression"===e.type&&e.node.callee){var r=e.node,a=null;if(a="MemberExpression"==r.callee.type&&r.callee.property?r.callee.property.name:r.callee.name,r.callee&&a===t){var l=[];r.arguments&&r.arguments.forEach(function(e){"StringLiteral"===e.type?l.push(e.value):"NumericLiteral"===e.type?l.push(e.value):"TemplateLiteral"===e.type&&l.push(function(e){for(var n="",t=0;t<e.quasis.length;t++){var o=e.quasis[t];n+=o.value.cooked,e.expressions[t]&&(n+="${"+t+"}")}return n}(e))}),1===l.length&&(l=l[0]);var i={functionName:a,functionArgs:l};o.push(i)}}}}},post:function(r){console.log("callList",o),console.log("findName",t),function(t,o){for(var r={},a=0;a<t.length;a++){var l=t[a],i="",s="";"object"==e(l.functionArgs)||"array"==typeof l.functionArgs?(i="$$$"+l.functionArgs[0]+"=",s=l.functionArgs[1]):s=l.functionArgs,r[i+s]=s}if(n.existsSync("local")||n.mkdirSync("local"),o.opts.exportRaw)n.writeFileSync("local/ExportRaw."+Math.random()+".json",JSON.stringify({callList:t},null,4));else{var c={translationMap:{}};if(n.existsSync("local/Export.language.json"))try{c=JSON.parse(n.readFileSync("local/Export.language.json"))}catch(e){c={translationMap:{}}}n.writeFileSync("local/Export.language.json",JSON.stringify({translationMap:Object.assign(c.translationMap,r)},null,4))}}(o,r)}}}});
